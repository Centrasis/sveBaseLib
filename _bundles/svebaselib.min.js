!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SveBaseLib",[],e):"object"==typeof exports?exports.SveBaseLib=e():t.SveBaseLib=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";this&&this.__awaiter,this&&this.__generator;Object.defineProperty(e,"__esModule",{value:!0}),e.SVESystemInfo=void 0;n(1);var i=function(){function t(){this.systemState={authorizationSystem:!1,basicSystem:!1,tokenSystem:!1},this.SQLCredentials={MySQL_DB:"",MySQL_Password:"",MySQL_User:""},this.sources={sveService:void 0,persistentDatabase:void 0,volatileDatabase:void 0},t.isServer=!1}return t.getIsServer=function(){return t.isServer},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.initSystem=function(){var t=this;return new Promise((function(e,n){t.instance.systemState={authorizationSystem:!1,basicSystem:!1,tokenSystem:!1},void 0!==t.getInstance().sources.sveService||n(!1)}))},t.getSystemStatus=function(){return this.getInstance().systemState},t.getFullSystemState=function(){return new Promise((function(t,e){}))},t.getAPIRoot=function(){return void 0!==t.getInstance().sources.sveService?t.getInstance().sources.sveService:""},t}();e.SVESystemInfo=i},function(t,e,n){"use strict";this&&this.__awaiter,this&&this.__generator;Object.defineProperty(e,"__esModule",{value:!0}),e.LoginState=e.SVEAccount=e.isBasicUserInitializer=e.isSessionUserInitializer=e.isTokenInfo=e.isLoginInfo=e.TokenType=void 0;var i,r,o=n(0);function s(t){return"name"in t&&"pass"in t}function u(t){return"name"in t&&"token"in t&&!s(t)}function a(t){return"sessionID"in t&&"loginState"in t}!function(t){t[t.RessourceToken=1]="RessourceToken",t[t.DeviceToken=2]="DeviceToken"}(i=e.TokenType||(e.TokenType={})),function(t){t[t.NotLoggedIn=1]="NotLoggedIn",t[t.LoggedInByUser=2]="LoggedInByUser",t[t.LoggedInByToken=3]="LoggedInByToken"}(r||(r={})),e.LoginState=r,e.isLoginInfo=s,e.isTokenInfo=u,e.isSessionUserInitializer=a,e.isBasicUserInitializer=function(t){return"id"in t&&!s(t)&&!a(t)};var c=function(){function t(t,e){var n=this;this.loginState=r.NotLoggedIn,this.name="",this.id=NaN,this.sessionID="",s(t)||u(t)?(this.init(null,r.NotLoggedIn),u(t)?this.doTokenLogin({user:t.name,token:t.token,ressource:"LogIn",type:i.DeviceToken,time:new Date}).then((function(t){n.loginState=t,void 0!==e&&e(n)}),(function(t){n.loginState=t,void 0!==e&&e(n)})):this.doLogin(t).then((function(t){n.loginState=t,void 0!==e&&e(n)}),(function(t){n.loginState=t,void 0!==e&&e(n)}))):a(t)?(this.sessionID=t.sessionID,this.loginState=t.loginState,this.name=t.name,this.id=t.id,void 0!==e&&e(this)):this.getByID(t.id).then((function(t){void 0!==e&&e(n)}),(function(t){void 0!==e&&e(n)}))}return t.prototype.getID=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.setSessionID=function(t){this.sessionID=t},t.prototype.getLoginState=function(){return this.loginState},t.prototype.init=function(t,e){null!==t?(this.name=t.name,this.id=t.id,this.loginState=e):(this.name="",this.id=NaN,this.loginState=r.NotLoggedIn)},t.prototype.getByID=function(t){return new Promise((function(t,e){}))},t.prototype.doLogin=function(t){var e=this;return new Promise((function(t,n){void 0!==o.SVESystemInfo.getInstance().sources.sveService||n(e.loginState)}))},t.prototype.createTokenFor=function(t,e){return new Promise((function(t,e){e({})}))},t.prototype.doTokenLogin=function(t){var e=this;return new Promise((function(t,n){void 0!==o.SVESystemInfo.getInstance().sources.sveService||n(e.loginState)}))},t.prototype.getState=function(){return this.loginState},t}();e.SVEAccount=c},function(t,e,n){"use strict";this&&this.__awaiter,this&&this.__generator;Object.defineProperty(e,"__esModule",{value:!0}),e.SVEProject=e.isProjectInitializer=e.SVEProjectType=void 0;var i,r=n(1),o=(n(3),n(0));n(4);function s(t){return"number"!=typeof t}!function(t){t[t.Vacation=0]="Vacation",t[t.Sales=1]="Sales"}(i=e.SVEProjectType||(e.SVEProjectType={})),e.isProjectInitializer=s;var u=function(){function t(t,e,n){this.id=NaN,this.name="",this.type=i.Vacation,s(t)?(this.id=t.id,this.group=t.group,this.name=t.name,this.type=t.type,this.handler=e,this.owner=t.owner,void 0!==n&&n(this)):o.SVESystemInfo.getIsServer()&&void 0!==n&&n(this)}return t.prototype.getID=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getType=function(){return this.type},t.prototype.getOwner=function(){var t=this;return"number"==typeof this.owner?new Promise((function(e,n){t.owner=new r.SVEAccount({id:t.owner},(function(n){e(t.owner)}))})):new Promise((function(e,n){null==t.owner?n():e(t.owner)}))},t.prototype.getGroup=function(){return this.group},t.prototype.getData=function(){return new Promise((function(t,e){}))},t}();e.SVEProject=u},function(t,e,n){"use strict";this&&this.__awaiter,this&&this.__generator;Object.defineProperty(e,"__esModule",{value:!0}),e.SVEGroup=void 0;var i=n(0),r=function(){function t(t,e,n){this.id=NaN,this.name="",i.SVESystemInfo.getIsServer()&&n(this)}return t.prototype.getID=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getProjects=function(){return new Promise((function(t,e){}))},t.prototype.getUsers=function(){return new Promise((function(t,e){}))},t.prototype.getRightsForUser=function(t){return new Promise((function(t,e){}))},t.getGroupsOf=function(t){return new Promise((function(t,e){}))},t}();e.SVEGroup=r},function(t,e,n){"use strict";this&&this.__awaiter,this&&this.__generator;Object.defineProperty(e,"__esModule",{value:!0}),e.SVEData=e.SVEDataVersion=e.SVEDataType=void 0;var i,r,o=n(1),s=(n(2),n(0));!function(t){t[t.Image=0]="Image",t[t.Video=1]="Video",t[t.PDF=2]="PDF",t[t.CSV=3]="CSV"}(i=e.SVEDataType||(e.SVEDataType={})),function(t){t[t.Full=0]="Full",t[t.Small=1]="Small",t[t.Preview=2]="Preview"}(r=e.SVEDataVersion||(e.SVEDataVersion={}));var u=new Map;u.set("html","text/html"),u.set("txt","text/css"),u.set("css","text/html"),u.set("gif","image/gif"),u.set("jpg","image/jpeg"),u.set("png","image/png"),u.set("svg","image/svg+xml"),u.set("js","application/javascript"),u.set("mp4","video/mp4"),u.set("pdf","application/pdf");var a=function(){function t(t,e,n){this.type=i.Image,this.id=-1,this.lastAccess=new Date,this.creation=new Date,this.handler=t,"number"==typeof e?(this.id=e,s.SVESystemInfo.getInstance().sources.sveService):(void 0!==e.id&&(this.id=e.id),this.type=e.type,this.data=e.data,void 0!==e.path&&(this.localDataInfo=e.path),this.parentProject=e.parentProject,this.owner=e.owner,n(this))}return t.getMimeTypeMap=function(){return u},t.prototype.initFromResult=function(e,n,i){this.localDataInfo={filePath:e.path,thumbnailPath:e.thumbnail},this.creation=e.creation,this.lastAccess=e.lastAccess,this.parentProject=n,this.type=t.getTypeFrom(e.type),this.owner=new o.SVEAccount({id:e.user_id},(function(t){i()}))},t.getTypeFrom=function(t){return"Image"===t?i.Image:"Video"===t?i.Video:"PDF"===t?i.PDF:"CSV"===t?i.CSV:i.Image},t.prototype.getID=function(){return this.id},t.prototype.getOwnerID=function(){return"number"==typeof this.owner?this.owner:this.owner.getID()},t.prototype.getOwner=function(){var t=this;return"number"==typeof this.owner?new Promise((function(e,n){t.owner=new o.SVEAccount({id:t.owner},(function(n){e(t.owner)}))})):new Promise((function(e,n){return e(t.owner)}))},t.prototype.getCreationDate=function(){return this.creation},t.prototype.getLastAccessDate=function(){return this.lastAccess},t.prototype.getCacheType=function(){var t="private";return this.type===i.PDF&&(t="no-store"),t},t.prototype.getContentType=function(){var t="application/octet-stream";if(void 0!==this.localDataInfo){var e=n(5);t=u.get(e.extname(this.currentDataVersion==r.Full?this.localDataInfo.filePath:this.localDataInfo.thumbnailPath).slice(1).toLowerCase())}else this.type===i.Image&&(t="image/png"),this.type===i.Video&&(t="video/mp4"),this.type===i.PDF&&(t="application/pdf");return t},t.prototype.getName=function(){return void 0===this.localDataInfo?"":n(5).basename(this.localDataInfo.filePath)},t.prototype.getType=function(){return this.type},t.prototype.getProject=function(){return this.parentProject},t.prototype.store=function(){return new Promise((function(t,e){t(!0)}))},t.prototype.getURI=function(){return s.SVESystemInfo.getAPIRoot()+"/project/"+this.parentProject.getID()+"/data/"+this.id+"/"+(r.Full==this.currentDataVersion)?"full":"preview"},t.prototype.getBLOB=function(t){var e=this;return new Promise((function(n,i){if(void 0!==e.data&&e.currentDataVersion===t)void 0!==e.data?n(e.data):i(null);else{e.currentDataVersion=t}}))},t.prototype.getStream=function(t){var e=this;return new Promise((function(n,i){if(void 0!==e.data&&e.currentDataVersion===t){var r=e;e.data.on("error",(function(t){i(null)})),e.data.on("open",(function(){n(r.data)}))}else i(null)}))},t}();e.SVEData=a},function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return(r?"/":"")+(e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===r(t,-1);return(t=n(i(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var r=i(t.split("/")),o=i(n.split("/")),s=Math.min(r.length,o.length),u=s,a=0;a<s;a++)if(r[a]!==o[a]){u=a;break}var c=[];for(a=u;a<r.length;a++)c.push("..");return(c=c.concat(o.slice(u))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,i=-1,r=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!r){i=o;break}}else r=!1;return-1===i?n?"/":".":n&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,i=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){n=e+1;break}}else-1===i&&(r=!1,i=e+1);return-1===i?"":t.slice(n,i)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,i=-1,r=!0,o=0,s=t.length-1;s>=0;--s){var u=t.charCodeAt(s);if(47!==u)-1===i&&(r=!1,i=s+1),46===u?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!r){n=s+1;break}}return-1===e||-1===i||0===o||1===o&&e===i-1&&e===n+1?"":t.slice(e,i)};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(7))},function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(0),e),r(n(1),e),r(n(2),e),r(n(3),e),r(n(4),e)},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var a,c=[],f=!1,p=-1;function l(){f&&a&&(f=!1,a.length?c=a.concat(c):p=-1,c.length&&h())}function h(){if(!f){var t=u(l);f=!0;for(var e=c.length;e;){for(a=c,c=[];++p<e;)a&&a[p].run();p=-1,e=c.length}a=null,f=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new g(t,e)),1!==c.length||f||u(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}])}));
//# sourceMappingURL=svebaselib.min.js.map